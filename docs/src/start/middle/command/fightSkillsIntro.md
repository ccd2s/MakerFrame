---
title: 技能脚本-简介
author:
  name: 深林孤鹰
  url: https://github.com/leamus
icon: circle-info
order: 7
---

## 一、说明

技能脚本在项目根目录的FightSkills目录下，每个技能一个文件夹，每个文件夹内的fight_skill.js就是技能脚本。

技能脚本有 \$createData函数 和 \$commons对象两个成员，\$createData函数 是每创建一个技能都会调用它，
所以写在它里的属性数据会有差异化且会被存档，而写在 \$commons对象 中的是通用的。

二者还有个区别就是 \$createData函数 里的数据一旦产生就不再受技能脚本影响，而 \$commons对象 里的数据是在游戏开始时载入的，所以会受脚本的影响。

技能脚本的根proto是 {\$objectType: 3}。

建议先用视图编程生成代码再进行修改。

## 二、数据成员

数据成员可写在 \$createData函数 和 \$commons对象 中，有：

```text
$name：字符串；技能名。
$description：字符串；技能描述。
$type：整型；0：普通攻击；1：技能。

$targetFlag：整型；0b10为选对方；0b1为选己方；0为不选（全体技能）。
$targetCount：整型；选择目标数；-1为全体；>0为个数；数组为范围；
```

注意：如果\$choiceScript为null，则根据这两项来选择系统的技能选择机制，反之这两个参数无效。

你可以在这里加其他任意属性。

## 三、函数成员

函数成员一般写在 \$commons对象中；

```text
$choiceScript：生成器函数；选择脚本系统，如果为null，则通过 $targetFlag 和 $targetCount 来使用系统通用的技能选择系统，如果自定义则使用自定义的技能选择系统（后面会详细介绍）。
$playScript：生成器函数；技能产生的动画和效果，通过这个函数可以制作各种丰富的技能播放效果（后面会详细介绍）。
$check：普通函数；检查技能（有4个阶段会调用：选择技能时、技能选择完毕后、攻击时、敌人和我方遍历时）；返回：true表示可以使用；字符串和数组表示不能使用并提示的信息（只有选择时）；stage为0表示选择技能时，为1表示选择技能完毕，为10表示战斗中（在阶段10减去MP的作用：道具的技能可以跳过减MP）；
```
